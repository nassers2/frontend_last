<!-- ğŸ’° Payroll Management Page - v8.0 with Custom Modals & Enhanced Settings -->
<style>
  .payroll-container { padding: 0; margin: 0; font-family: 'Cairo', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background: #f1f5f9; }
  
  /* ===== Cards ===== */
  .card { background: #fff; padding: 24px; border-radius: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
  .accent-violet { border-right: 4px solid #8b5cf6; }
  .accent-amber { border-right: 4px solid #f59e0b; }

  /* ===== Header ===== */
  .header-row { display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 20px; }
  .icon-box { width: 60px; height: 60px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 28px; background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%); }
  .title { color: #1e293b; margin: 0; font-size: 24px; }
  .subtitle { color: #64748b; font-size: 14px; margin: 6px 0 0 0; }

  /* ===== Controls ===== */
  .grid { display: grid; gap: 16px; }
  .grid.auto-200 { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
  .grid.auto-180 { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
  .grid.auto-250 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); align-items: end; }
  label { display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px; }
  input[type="number"], input[type="date"], select { width: 100%; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 14px; transition: all 0.2s; }
  input[type="number"]:focus, input[type="date"]:focus, select:focus { outline: none; border-color: #8b5cf6; box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1); }
  
  .btn { padding: 10px 16px; border-radius: 8px; font-weight: 600; font-size: 14px; cursor: pointer; border: none; transition: all 0.2s; }
  .btn:hover { transform: translateY(-1px); }
  .btn-outline { background: #fff; border: 1px solid #e2e8f0; color: #334155; }
  .btn-outline:hover { background: #f8fafc; border-color: #cbd5e1; }
  .btn-primary { background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%); color: #fff; }
  .btn-primary:hover { box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4); }
  .btn-warn { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: #fff; }
  .btn-warn:hover { box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); }
  .btn-green { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #fff; }
  .btn-green:hover { box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4); }
  .btn-blue { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: #fff; }
  .btn-blue:hover { box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4); }
  .btn-red { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: #fff; }
  .btn-red:hover { box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4); }

  /* ===== Table ===== */
  table { width: 100%; border-collapse: collapse; font-size: 13px; }
  thead { background: #f8fafc; position: sticky; top: 0; z-index: 10; }
  th { padding: 12px 10px; text-align: center; font-weight: 600; color: #475569; font-size: 12px; border-bottom: 2px solid #e2e8f0; white-space: nowrap; }
  th:first-child { text-align: right; }
  td { padding: 10px 10px; border-bottom: 1px solid #f1f5f9; color: #334155; text-align: center; vertical-align: middle; }
  td:first-child { text-align: right; }
  tbody tr:hover { background: #fafbfc; transition: all 0.2s; }

  .status-badge { display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; }
  .status-draft { background: #e0e7ff; color: #3730a3; }
  .status-approved { background: #d1fae5; color: #065f46; }
  .status-paid { background: #dbeafe; color: #1e40af; }

  .loading-spinner { display: inline-block; width: 40px; height: 40px; border: 4px solid #f3f4f6; border-top-color: #8b5cf6; border-radius: 50%; animation: spin 1s linear infinite; }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* ===== Enhanced Settings Styles ===== */
  .settings-header { 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    padding-bottom: 16px;
    border-bottom: 2px solid #f1f5f9;
    margin-bottom: 20px;
  }
  
  .settings-title {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  
  .settings-title-icon {
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
  }
  
  .settings-title h3 {
    font-size: 18px;
    font-weight: 700;
    color: #1e293b;
    margin: 0;
  }
  
  .settings-title p {
    font-size: 13px;
    color: #64748b;
    margin: 4px 0 0 0;
  }
  
  .calc-type-selector {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 24px;
  }
  
  .calc-type-card {
    padding: 16px;
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
  }
  
  .calc-type-card:hover {
    border-color: #8b5cf6;
    background: #faf5ff;
  }
  
  .calc-type-card.active {
    border-color: #8b5cf6;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(99, 102, 241, 0.1) 100%);
  }
  
  .calc-type-card .icon {
    font-size: 32px;
    margin-bottom: 8px;
  }
  
  .calc-type-card .label {
    font-weight: 700;
    color: #1e293b;
    font-size: 14px;
  }
  
  .calc-type-card .desc {
    font-size: 11px;
    color: #64748b;
    margin-top: 4px;
  }
  
  .settings-section {
    background: #f8fafc;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 16px;
  }
  
  .settings-section-title {
    font-size: 14px;
    font-weight: 700;
    color: #475569;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .input-group {
    position: relative;
  }
  
  .input-group input {
    padding-left: 50px;
  }
  
  .input-suffix {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #64748b;
    font-size: 12px;
    font-weight: 600;
  }
  
  .formula-box { 
    background: linear-gradient(135deg, #eff6ff 0%, #f5f3ff 100%); 
    border: 2px solid #c7d2fe; 
    border-radius: 12px; 
    padding: 16px; 
    font-size: 13px; 
    color: #4338ca; 
    line-height: 1.8;
  }
  
  .formula-box strong {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    color: #3730a3;
  }

  /* ===== Modal Styles ===== */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
  }
  
  .modal-overlay.active {
    opacity: 1;
    visibility: visible;
  }
  
  .modal-content {
    background: white;
    border-radius: 20px;
    padding: 28px;
    width: 90%;
    max-width: 420px;
    transform: scale(0.9);
    transition: all 0.3s;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  }
  
  .modal-overlay.active .modal-content {
    transform: scale(1);
  }
  
  .modal-header {
    text-align: center;
    margin-bottom: 24px;
  }
  
  .modal-icon {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    margin: 0 auto 16px;
  }
  
  .modal-icon.warning { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); }
  .modal-icon.info { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }
  .modal-icon.danger { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); }
  
  .modal-title {
    font-size: 20px;
    font-weight: 700;
    color: #1e293b;
    margin: 0 0 8px 0;
  }
  
  .modal-subtitle {
    font-size: 14px;
    color: #64748b;
    margin: 0;
  }
  
  .modal-body {
    margin-bottom: 24px;
  }
  
  .modal-input-group {
    margin-bottom: 16px;
  }
  
  .modal-input-group label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    color: #475569;
    margin-bottom: 8px;
  }
  
  .modal-input-group input {
    width: 100%;
    padding: 14px 16px;
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    text-align: center;
    transition: all 0.2s;
  }
  
  .modal-input-group input:focus {
    outline: none;
    border-color: #8b5cf6;
    box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.1);
  }
  
  .modal-hint {
    font-size: 12px;
    color: #64748b;
    text-align: center;
    margin-top: 8px;
  }
  
  .modal-info-box {
    background: #f8fafc;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
  }
  
  .modal-info-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid #e2e8f0;
  }
  
  .modal-info-row:last-child {
    border-bottom: none;
  }
  
  .modal-info-label {
    color: #64748b;
    font-size: 13px;
  }
  
  .modal-info-value {
    font-weight: 700;
    color: #1e293b;
    font-size: 14px;
  }
  
  .modal-info-value.highlight {
    color: #dc2626;
  }
  
  .modal-footer {
    display: flex;
    gap: 12px;
  }
  
  .modal-footer .btn {
    flex: 1;
    padding: 14px;
    font-size: 15px;
  }
</style>

<div class="payroll-container">

  <!-- Header -->
  <div class="card accent-violet" style="margin-bottom: 24px;">
    <div class="header-row">
      <div style="display:flex; align-items:center; gap:16px;">
        <div class="icon-box">ğŸ’°</div>
        <div>
          <h2 class="title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±ÙˆØ§ØªØ¨</h2>
          <p class="subtitle">Ø¹Ø±Ø¶ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„ÙØªØ±Ø©</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Enhanced Settings Card -->
  <div class="card" style="margin-bottom: 24px; border-right: 4px solid #f59e0b;">
    <div class="settings-header">
      <div class="settings-title">
        <div class="settings-title-icon">âš™ï¸</div>
        <div>
          <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ÙˆØ§ØªØ¨</h3>
          <p>ØªØ®ØµÙŠØµ Ø·Ø±ÙŠÙ‚Ø© Ø­Ø³Ø§Ø¨ Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨</p>
        </div>
      </div>
      <button class="btn btn-outline" onclick="toggleSettings()">
        <span id="toggle-icon">â–¼</span> <span id="toggle-text">Ø¥Ø¸Ù‡Ø§Ø±</span>
      </button>
    </div>

    <div id="settings-container" style="display:none;">
      
      <!-- Calculation Type Cards -->
      <div class="calc-type-selector">
        <div class="calc-type-card active" id="calc-card-target" onclick="selectCalculationType('target_orders')">
          <div class="icon">ğŸ¯</div>
          <div class="label">ØªØ§Ø±Ø¬Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
          <div class="desc">Ø±Ø§ØªØ¨ Ø«Ø§Ø¨Øª + Ù…ÙƒØ§ÙØ£Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
        </div>
        <div class="calc-type-card" id="calc-card-freelancer" onclick="selectCalculationType('freelancer')">
          <div class="icon">ğŸ’¼</div>
          <div class="label">ÙØ±ÙŠ Ù„Ø§Ù†Ø³Ø±</div>
          <div class="desc">Ù†Ø³Ø¨Ø© Ù…Ù† Ø§Ù„ØªÙˆØµÙŠÙ„ - ØªÙƒÙ„ÙØ© Ø§Ù„Ø­Ø³Ø§Ø¨</div>
        </div>
      </div>
      
      <input type="hidden" id="calculation-type" value="target_orders" />

      <!-- Base Salary Section -->
      <div class="settings-section">
        <div class="settings-section-title">
          <span>ğŸ’µ</span> Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
        </div>
        <div class="input-group">
          <input type="number" id="base-salary" step="0.01" placeholder="0.00" />
          <span class="input-suffix">Ø±.Ø³</span>
        </div>
        <small style="color:#64748b; font-size:11px; display:block; margin-top:8px;">Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø«Ø§Ø¨Øª Ø§Ù„Ù…Ø¶Ø§Ù Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨</small>
      </div>

      <!-- Target Orders Settings -->
      <div id="target-orders-group">
        <div class="settings-section">
          <div class="settings-section-title">
            <span>ğŸ¯</span> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ§Ø±Ø¬Øª
          </div>
          <div class="grid auto-200">
            <div>
              <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù</label>
              <input type="number" id="target-orders" placeholder="450" />
            </div>
            <div>
              <label>Ù…ÙƒØ§ÙØ£Ø© ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„ØªØ§Ø±Ø¬Øª</label>
              <div class="input-group">
                <input type="number" id="target-bonus" step="0.01" placeholder="0.00" />
                <span class="input-suffix">Ø±.Ø³</span>
              </div>
            </div>
            <div>
              <label>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</label>
              <div class="input-group">
                <input type="number" id="order-value-default" step="0.01" value="4.4" />
                <span class="input-suffix">Ø±.Ø³</span>
              </div>
            </div>
            <div>
              <label>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ§Ø±Ø¬Øª</label>
              <div class="input-group">
                <input type="number" id="order-value-after-target" step="0.01" value="4.4" />
                <span class="input-suffix">Ø±.Ø³</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="formula-box">
          <strong>ğŸ“ Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</strong>
          Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª + Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ + Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ØªØ§Ø±Ø¬Øª + (Ø§Ù„Ø¥ÙƒØ±Ø§Ù…ÙŠØ§Øª + Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª + Ø§Ù„Ø¯Ø§Ø¦Ù†) - ((Ø§Ù„Ù†Ù‚Ø¯ - Ø§Ù„ÙƒØ§Ø´ Ø§Ù„Ù…Ø³ØªÙ„Ù…) + Ø§Ù„ØºØ±Ø§Ù…Ø§Øª + Ø§Ù„Ù…Ø¯ÙŠÙ†) - Ø®ØµÙ… Ø§Ù„Ø³Ù„ÙØ©
        </div>
      </div>

      <!-- Freelancer Settings -->
      <div id="freelancer-group" style="display:none;">
        <div class="settings-section">
          <div class="settings-section-title">
            <span>ğŸ’¼</span> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙØ±ÙŠ Ù„Ø§Ù†Ø³Ø±
          </div>
          <div>
            <label>ØªÙƒÙ„ÙØ© Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</label>
            <div class="input-group">
              <input type="number" id="account-cost" step="0.01" placeholder="30.00" />
              <span class="input-suffix">Ø±.Ø³</span>
            </div>
            <small style="color:#64748b; font-size:11px; display:block; margin-top:8px;">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø°ÙŠ ÙŠÙØ®ØµÙ… Ù…Ù† Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø¹Ù† ÙƒÙ„ ÙŠÙˆÙ… Ø¹Ù…Ù„</small>
          </div>
        </div>
        
        <div class="formula-box">
          <strong>ğŸ“ Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</strong>
          (Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„ + Ø§Ù„Ø¥ÙƒØ±Ø§Ù…ÙŠØ§Øª + Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª + Ø§Ù„Ø¯Ø§Ø¦Ù†) - (Ø§Ù„Ù†Ù‚Ø¯ Ø§Ù„Ù…Ø­ØµÙ„ + Ø§Ù„Ù…Ø¯ÙŠÙ† + Ø§Ù„ØºØ±Ø§Ù…Ø§Øª) - (Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ã— Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©) - Ø®ØµÙ… Ø§Ù„Ø³Ù„ÙØ©
        </div>
      </div>

      <button class="btn btn-warn" style="width:100%; margin-top:20px; padding: 14px;" onclick="saveSettings()">
        ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
      </button>
    </div>
  </div>

  <!-- Period Selection & Actions -->
  <div class="card" style="margin-bottom: 24px;">
    <div class="grid auto-250">
      <div>
        <label>ğŸ“… Ù…Ù† ØªØ§Ø±ÙŠØ®</label>
        <input type="date" id="payroll-start-date" />
      </div>
      <div>
        <label>ğŸ“… Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®</label>
        <input type="date" id="payroll-end-date" />
      </div>
      <div>
        <label>ğŸ‘¥ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</label>
        <select id="group-filter">
          <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨</option>
        </select>
      </div>
      <div>
        <label>ğŸ“‹ Ø§Ù„Ø­Ø§Ù„Ø©</label>
        <select id="status-filter" onchange="filterByStatus()">
          <option value="draft">Ù…Ø³ÙˆØ¯Ø©</option>
          <option value="approved">Ù…Ø¹ØªÙ…Ø¯</option>
          <option value="paid">Ù…Ø¯ÙÙˆØ¹</option>
          <option value="all">Ø§Ù„ÙƒÙ„</option>
        </select>
      </div>
      <div style="display:flex; gap:12px; grid-column: span 2;">
        <button class="btn btn-primary" style="flex:1; display:flex; align-items:center; justify-content:center; gap:8px;" onclick="fetchPayrollData()">ğŸ”„ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ÙˆØ§ØªØ¨</button>
        <button class="btn btn-outline" style="display:flex; align-items:center; gap:8px;" onclick="loadPayrollRecords()">ğŸ“‹ Ø¹Ø±Ø¶</button>
      </div>
    </div>
  </div>

  <!-- Stats Cards -->
  <div id="payroll-stats" class="grid auto-180" style="display:none; margin-bottom:24px;">
    <div class="card" style="border-right:4px solid #3b82f6;">
      <div style="font-size:24px; margin-bottom:8px;">ğŸ‘¥</div>
      <div style="color:#64748b; font-size:12px; margin-bottom:6px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨</div>
      <div id="stat-drivers" style="font-size:24px; font-weight:700; color:#1e293b;">0</div>
    </div>
    <div class="card" style="border-right:4px solid #8b5cf6;">
      <div style="font-size:24px; margin-bottom:8px;">ğŸ“¦</div>
      <div style="color:#64748b; font-size:12px; margin-bottom:6px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
      <div id="stat-orders" style="font-size:24px; font-weight:700; color:#1e293b;">0</div>
    </div>
    <div class="card" style="border-right:4px solid #06b6d4;">
      <div style="font-size:24px; margin-bottom:8px;">ğŸšš</div>
      <div style="color:#64748b; font-size:12px; margin-bottom:6px;">Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„</div>
      <div id="stat-delivery" style="font-size:24px; font-weight:700; color:#1e293b;">0 Ø±.Ø³</div>
    </div>
    <div class="card" style="border-right:4px solid #10b981;">
      <div style="font-size:24px; margin-bottom:8px;">ğŸ’°</div>
      <div style="color:#64748b; font-size:12px; margin-bottom:6px;">Ø§Ù„Ø¥ÙƒØ±Ø§Ù…ÙŠØ§Øª</div>
      <div id="stat-tips" style="font-size:24px; font-weight:700; color:#1e293b;">0 Ø±.Ø³</div>
    </div>
    <div class="card" style="border-right:4px solid #f59e0b;">
      <div style="font-size:24px; margin-bottom:8px;">ğŸ</div>
      <div style="color:#64748b; font-size:12px; margin-bottom:6px;">Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</div>
      <div id="stat-bonuses" style="font-size:24px; font-weight:700; color:#1e293b;">0 Ø±.Ø³</div>
    </div>
    <div class="card" style="border-right:4px solid #ef4444;">
      <div style="font-size:24px; margin-bottom:8px;">âš ï¸</div>
      <div style="color:#64748b; font-size:12px; margin-bottom:6px;">Ø§Ù„ØºØ±Ø§Ù…Ø§Øª</div>
      <div id="stat-penalties" style="font-size:24px; font-weight:700; color:#1e293b;">0 Ø±.Ø³</div>
    </div>
    <div class="card" style="border-right:4px solid #14b8a6;">
      <div style="font-size:24px; margin-bottom:8px;">ğŸ’µ</div>
      <div style="color:#64748b; font-size:12px; margin-bottom:6px;">Ø§Ù„Ù†Ù‚Ø¯ Ø§Ù„Ù…Ø­ØµÙ„</div>
      <div id="stat-cash" style="font-size:24px; font-weight:700; color:#1e293b;">0 Ø±.Ø³</div>
    </div>
    <div class="card" style="border-right:4px solid #dc2626;">
      <div style="font-size:24px; margin-bottom:8px;">ğŸ’³</div>
      <div style="color:#64748b; font-size:12px; margin-bottom:6px;">Ø®ØµÙ… Ø§Ù„Ø³ÙÙ„Ù</div>
      <div id="stat-advance" style="font-size:24px; font-weight:700; color:#dc2626;">0 Ø±.Ø³</div>
    </div>
    <div class="card" style="border-right:4px solid #6366f1;">
      <div style="font-size:24px; margin-bottom:8px;">ğŸ’</div>
      <div style="color:#64748b; font-size:12px; margin-bottom:6px;">Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„ØµØ§ÙÙŠ</div>
      <div id="stat-net" style="font-size:24px; font-weight:700; color:#1e293b;">0 Ø±.Ø³</div>
    </div>
  </div>

  <!-- Payroll Table -->
  <div class="card">
    <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:24px; gap:16px; flex-wrap:wrap;">
      <h2 style="font-size:20px; font-weight:600; color:#1e293b;">ğŸ“Š Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø±ÙˆØ§ØªØ¨ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ</h2>
      <div style="display:flex; gap:12px; flex-wrap:wrap;">
        <button id="approve-all-btn" class="btn btn-green" style="display:none;" onclick="showApproveModal()">âœ… Ø¥ØµØ¯Ø§Ø± ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø±ÙˆØ§ØªØ¨</button>
        <button class="btn btn-blue" onclick="exportToExcel()">ğŸ“¥ ØªØµØ¯ÙŠØ± Excel</button>
      </div>
    </div>
    <div id="payroll-table-content">
      <div style="text-align:center; padding:60px; color:#64748b;">
        <div style="font-size:48px; margin-bottom:16px;">ğŸ’°</div>
        <p>Ù‚Ù… Ø¨Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ø®ØªØ± Ø§Ù„ÙØªØ±Ø© Ø«Ù… Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ÙˆØ§ØªØ¨"</p>
      </div>
    </div>
  </div>

</div>

<!-- Modal: ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¨Ù„Øº Ø§Ù„Ø³Ù„ÙØ© -->
<div class="modal-overlay" id="advance-modal">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-icon info">ğŸ’³</div>
      <h3 class="modal-title">ØªØ¹Ø¯ÙŠÙ„ Ø®ØµÙ… Ø§Ù„Ø³Ù„ÙØ©</h3>
      <p class="modal-subtitle" id="advance-modal-driver">Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</p>
    </div>
    <div class="modal-body">
      <div class="modal-info-box">
        <div class="modal-info-row">
          <span class="modal-info-label">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø®ØµÙ…</span>
          <span class="modal-info-value" id="advance-modal-max">0 Ø±.Ø³</span>
        </div>
      </div>
      <div class="modal-input-group">
        <label>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø±Ø§Ø¯ Ø®ØµÙ…Ù‡</label>
        <input type="number" id="advance-modal-input" min="0" step="0.01" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº" />
        <p class="modal-hint">Ø£Ø¯Ø®Ù„ 0 Ù„ØªØ£Ø¬ÙŠÙ„ Ø§Ù„Ø®ØµÙ… Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</p>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeAdvanceModal()">Ø¥Ù„ØºØ§Ø¡</button>
      <button class="btn btn-primary" onclick="confirmAdvanceAmount()">ØªØ£ÙƒÙŠØ¯</button>
    </div>
  </div>
</div>

<!-- Modal: ØªØ£ÙƒÙŠØ¯ Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ± -->
<div class="modal-overlay" id="approve-modal">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-icon warning">âš ï¸</div>
      <h3 class="modal-title">ØªØ£ÙƒÙŠØ¯ Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ±</h3>
      <p class="modal-subtitle">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥ØµØ¯Ø§Ø± ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø±ÙˆØ§ØªØ¨ØŸ</p>
    </div>
    <div class="modal-body">
      <div class="modal-info-box">
        <div class="modal-info-row">
          <span class="modal-info-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø±ÙˆØ§ØªØ¨</span>
          <span class="modal-info-value" id="approve-modal-count">0</span>
        </div>
        <div class="modal-info-row">
          <span class="modal-info-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ÙˆØ§ØªØ¨</span>
          <span class="modal-info-value" id="approve-modal-total">0 Ø±.Ø³</span>
        </div>
        <div class="modal-info-row">
          <span class="modal-info-label">Ø®ØµÙ… Ø§Ù„Ø³ÙÙ„Ù</span>
          <span class="modal-info-value highlight" id="approve-modal-advance">0 Ø±.Ø³</span>
        </div>
      </div>
      <p style="font-size: 13px; color: #64748b; text-align: center;">
        Ø³ÙŠØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ù† "Ù…Ø³ÙˆØ¯Ø©" Ø¥Ù„Ù‰ "Ù…Ø¹ØªÙ…Ø¯" ÙˆØ®ØµÙ… Ø£Ù‚Ø³Ø§Ø· Ø§Ù„Ø³Ù„Ù
      </p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeApproveModal()">Ø¥Ù„ØºØ§Ø¡</button>
      <button class="btn btn-green" onclick="confirmApproveAll()">âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ØµØ¯Ø§Ø±</button>
    </div>
  </div>
</div>

<script src="/assets/js/payroll.js?v=8"></script>